<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}"/>
    <title>Document</title>

    <script>
        $(document).on("click", "#pending", function (o) {
          //Serialize Form
          o.preventDefault()
          var myData = $('#taskform').serialize();
    
    
    
    
          var status = 1
    
          myData = myData; //You could get this from a hidden field perhaps.
    
          $.ajax({
            type: "POST",
            url: "/viewtask/",
            data: {
              'status': status,
              'csrfmiddlewaretoken': $("input[name='csrfmiddlewaretoken']").val(),
            },
            success: function (response) {
              $(".card-body").html(response);
            }
          });
    
        });
    
        $(document).on("click", "#logout", function (o) {
          $.ajax({
    
            url: "/logout/",
            success: function (response) {
              // $("html").html(response);
              window.location.href = '/login/';
            }
          });
    
    
        });
        var buttons = document.querySelectorAll('.btn')
    
      
    
    
        $(document).on("click", "#complist", function (o) {
          //Serialize Form
          o.preventDefault()
          var myData = $('#taskform').serialize();
    
          // var button = new bootstrap.Button(button)
          // ('.btn').toggle()
    
          //Append custom value
    
          var status = 0
    
          myData = myData; //You could get this from a hidden field perhaps.
    
          $.ajax({
            type: "POST",
            url: "/viewtask/",
            data: {
              'status': status,
              'csrfmiddlewaretoken': $("input[name='csrfmiddlewaretoken']").val(),
            },
            success: function (response) {
              $(".card-body").html(response);
            }
    
          });
    
    
    
    
        });
    
    
        // $(document).on("change", "#checkbox2", function () {
        //   // if ($('input[name="checkbox2"]').is(':checked')){
        //   var tid = ($(this).closest('tr').find('#taskid1').val());
        //   $('td input:checked').closest('tr').remove();
    
        //   var stat = 0;
        //   move_task(stat, tid);
        // });
        $(document).on("change", "#checkbox2", function () {
          var myData = $('#movetask').serialize();
    
          var tid = $(this).closest('tr').find('#taskid1').val();
          $("#tablaNorma input[type='checkbox']:checked").closest("tr").remove();
          //alert(tid)
          //Append custom value
          // $('td input:checked').closest('tr').remove();
          // myData = myData + "&var1=" + "movetask" + "&var2=" + tid; //You could get this from a hidden field perhaps.
          var status = 1;
          $.ajax({
            type: "POST",
            url: "/movetask/",
            data: {
              'tid': tid,
              'status': status,
              'csrfmiddlewaretoken': $("input[name='csrfmiddlewaretoken']").val(),
            },
            datatype: "html",
            success: function (response) {
              $(".card-body").html(response);
            }
          });
        });
        // $(document).on("change", "#checkbox2", function () {
        //Serialize Form
        $(document).on("change", "#checkbox2", function () {
          var myData = $('#movetask').serialize();
    
          var tid = $(this).closest('tr').find('#taskid1').val();
          $("#tablaNorma input[type='checkbox']:checked").closest("tr").remove();
          //alert(tid)
          //Append custom value
          // $('td input:checked').closest('tr').remove();
          // myData = myData + "&var1=" + "movetask" + "&var2=" + tid; //You could get this from a hidden field perhaps.
          var status = 1;
          $.ajax({
            type: "POST",
            url: "/movetask/",
            data: {
              'tid': tid,
              'status': status,
              'csrfmiddlewaretoken': $("input[name='csrfmiddlewaretoken']").val(),
            },
            datatype: "html",
            success: function (response) {
              $(".card-body").html(response);
            }
          });
    
        });
        $(document).on("change", "#checkbox1", function () {
          var myData = $('#movetask').serialize();
    
          var tid = $(this).closest('tr').find('#taskid1').val();
          $(this).closest("tr").remove();
          //alert(tid)
          //Append custom value
          // $('td input:checked').closest('tr').remove();
          // myData = myData + "&var1=" + "movetask" + "&var2=" + tid; //You could get this from a hidden field perhaps.
          var status = 0;
          $.ajax({
            type: "POST",
            url: "/movetask/",
            data: {
              'tid': tid,
              'status': status,
              'csrfmiddlewaretoken': $("input[name='csrfmiddlewaretoken']").val(),
            },
            datatype: "html",
            success: function (response) {
              $(".card-body").html(response);
            }
          });
    
        });
      </script>
</head>
<body>
    <header>

        <span>
          <h5>
    
            <span class="greeting">{{"Hi "}}{{request.session.firstname}}</span>
    
        </span>
      </header>
     
    
      <div class="container">
        <div class="row justify-content-center">
    
          <form method="post" action="{% url 'taskform' %}" name="taskform" id="movetask">
            {%csrf_token%}
    
    
            <div class="main fixed-top border border-primary bg-black">
              <div class="row div_data">
    
                <input type="text" name="task1" class="input-text form-control border-0 bg-light"
                  placeholder="enter your task.." aria-label="task1" aria-describedby="basic-addon1" maxlength="50"
                  pattern="([^\s][A-zÀ-ž\s]+)" title="Letters & space only" required>
              </div>
    
                <div class="gap-0 d-grid d-md-block col-12">
                
                <button type="submit" class="btn btn-danger btn-sm " name="AddTask">Add</button>
              
                <button type="submit" class="btn btn-info btn-sm" value="0" id="pending">Task-nc</button>
             
                <input type="hidden" name="pending" value="Pending">
    
                <button type="submit" class="btn btn-success btn-sm" value="1" id="complist">Tasks-c
                </button>
    
                <button type="submit" class="btn btn-warning btn-sm" value="1" id="logout">Logout</button>
              </div>
    
            </div>
    
          </form>
    
        </div>
      </div>
      <div class="card-body">


      </div>
    
</body>
</html>